-- Add geojson column for custom polygon zones
ALTER TABLE delivery_zones 
ADD COLUMN IF NOT EXISTS geojson JSONB;

-- Update the main delivery zone with the custom polygon
UPDATE delivery_zones 
SET geojson = '{
  "type": "Polygon",
  "coordinates": [[
    [0.9540851670808763, 49.344115440168],
    [0.9523970008162621, 49.34081573525023],
    [0.9570394580425443, 49.33962412076377],
    [0.9663243724961035, 49.33999077444807],
    [0.9698413855467152, 49.338432477423424],
    [0.9758906479935945, 49.34017410026581],
    [0.9808144662648033, 49.34200732088357],
    [0.9920689080258285, 49.3427405900089],
    [1.000931780913021, 49.346406771736724],
    [1.0045273499021619, 49.3489667231361],
    [1.0118070517136175, 49.34852362991634],
    [1.0116283040153178, 49.34590414391616],
    [1.0082129411826202, 49.34370930801626],
    [1.0108024225846748, 49.34058816029216],
    [1.0133484274815885, 49.33910851091315],
    [1.012987872254996, 49.33745321791977],
    [1.0118370768998375, 49.33459229140669],
    [1.0139802559380087, 49.332103008125245],
    [1.017161249682033, 49.33130227460978],
    [1.0200480631964695, 49.33244534744321],
    [1.0328440882362315, 49.32989527054133],
    [1.0342299573720766, 49.330894670831725],
    [1.0342999233154728, 49.33227361103815],
    [1.0351076751103392, 49.33296779108022],
    [1.0352838587541555, 49.333862103798566],
    [1.0347296179782859, 49.33499791605604],
    [1.0342171957579183, 49.336329804624086],
    [1.0335500123161125, 49.3369577542673],
    [1.0323379120671632, 49.3368858242456],
    [1.031720822189527, 49.33713345433026],
    [1.0321067429289315, 49.33792173518671],
    [1.0314152887908392, 49.33831050183292],
    [1.030930231247936, 49.338329400240724],
    [1.0302391549918468, 49.33866738987567],
    [1.0298537639270933, 49.33929045216976],
    [1.029169906752287, 49.34003409842052],
    [1.0286617415798673, 49.34057841620128],
    [1.0284457609310778, 49.341012491968286],
    [1.0268593731987323, 49.34195672392693],
    [1.025641342984045, 49.34264149714278],
    [1.0255529187307104, 49.34332501958394],
    [1.0269130881596027, 49.34566088151212],
    [1.0282596443758223, 49.34776455826898],
    [1.0298631385796853, 49.34966861544419],
    [1.0301099857015288, 49.35196737950608],
    [1.025670327768779, 49.351964792918466],
    [1.024975820983201, 49.35155471251929],
    [1.0231803426763122, 49.35169277512],
    [1.0225894002591929, 49.35174017512119],
    [1.0223978867510084, 49.351507161048005],
    [1.0223391067388832, 49.351181492327726],
    [1.0218607593699858, 49.350864751802646],
    [1.0215662954583706, 49.3506141160351],
    [1.0216157002071213, 49.35039867914767],
    [1.0219350856662857, 49.35018163900827],
    [1.0223355078934162, 49.34992791929284],
    [1.021697831767142, 49.34951476060746],
    [1.0207837514179232, 49.34903701092952],
    [1.0202880170245976, 49.34875167125455],
    [1.0140023734799115, 49.35112114037386],
    [1.0147948554182449, 49.35211927475822],
    [1.0147795897205185, 49.35331887369668],
    [1.0151053588206764, 49.35458426979403],
    [1.0158987749689743, 49.35690147671892],
    [1.0164444008888154, 49.35772854183895],
    [1.016960020113828, 49.3587513457303],
    [1.0179087923868622, 49.35959545118243],
    [1.019007446098101, 49.360560890774025],
    [1.0201912105893598, 49.36174309570481],
    [1.0227357219595774, 49.362982892620664],
    [1.0241018944978464, 49.36363117573893],
    [1.024743036435268, 49.36311471510865],
    [1.025740673357916, 49.36302016544337],
    [1.0267659004927907, 49.36343153037092],
    [1.0276237546944742, 49.364042450617774],
    [1.0283399264650086, 49.364623186980765],
    [1.029218864546749, 49.365335899506704],
    [1.0307376339742973, 49.36784105694653],
    [1.034462638974503, 49.37160913087516],
    [1.035021763838273, 49.37511973836453],
    [1.033596377618892, 49.37634409077208],
    [1.034732138619944, 49.37775728512025],
    [1.0380795645739056, 49.378647145079526],
    [1.0382855414574408, 49.38062655902198],
    [1.0380558180960406, 49.38238171191739],
    [1.036423786595435, 49.382744251468296],
    [1.0390628307082466, 49.38243033600125],
    [1.0401666550311575, 49.383325078222185],
    [1.0413849211946342, 49.38450556671262],
    [1.041136634443319, 49.38544705998447],
    [1.0398908339382729, 49.386103820041455],
    [1.0411182308391744, 49.38691623296671],
    [1.0430428919420365, 49.386992136525436],
    [1.0437509304413766, 49.38756600972218],
    [1.0442882984642665, 49.38893424624601],
    [1.043427422294144, 49.390933098430935],
    [1.0403626776311796, 49.39247135057249],
    [1.037989288198645, 49.393651933268416],
    [1.0354800320456548, 49.39493985573526],
    [1.0335256800361492, 49.39618000569783],
    [1.0318881571090515, 49.39700670501563],
    [1.0300353653287857, 49.39731504048902],
    [1.0286008822665167, 49.39788327512258],
    [1.0265091483655624, 49.3979528412562],
    [1.0252594479725587, 49.3978978665574],
    [1.0233214302705846, 49.397567299002816],
    [1.022812464883458, 49.396332876222914],
    [1.0218211162557225, 49.39573673761919],
    [1.020115933147565, 49.396070708105015],
    [1.0163142407666612, 49.39537163710918],
    [1.0125833827394786, 49.393527855296554],
    [1.011520232311824, 49.38811682309958],
    [1.0117694566542639, 49.38408089305969],
    [1.0115257575052112, 49.382570838039726],
    [1.0087185719780223, 49.37693463578523],
    [1.0033341720857436, 49.37132181162664],
    [0.999894540998497, 49.36724421614264],
    [0.9937893353524601, 49.36109446202477],
    [0.9855161340431948, 49.3553407451671],
    [0.9825872732361915, 49.35391895956607],
    [0.9724144548114566, 49.351142337143784],
    [0.9650502204790996, 49.350711083415376],
    [0.954591124395364, 49.35022527622317],
    [0.9523403634409533, 49.34969267849516],
    [0.9530535066567154, 49.348254619529655],
    [0.9543084628672318, 49.34395444128293],
    [0.9540851670808763, 49.344115440168]
  ]]
}'::jsonb
WHERE name ILIKE '%Grand-Couronne%';
